<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>WebDNN</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="assets/css/prism.css">
	<script src="assets/js/prism.js"></script>
	<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">-->
</head>
<body>
<div class="sidenav">
	<nav class="tsd-navigation secondary menu-sticky">
		<ul>
			<li class=" tsd-kind-external-module tsd-is-external">
				<a href="modules/webdnn.html">webdnn</a>
			</li>
			<li class=" tsd-kind-external-module tsd-is-external">
				<a href="modules/webdnn_image.html">webdnn/image</a>
			</li>
			<li class=" tsd-kind-external-module tsd-is-external">
				<a href="modules/webdnn_math.html">webdnn/math</a>
			</li>
		</ul>
	</nav>
</div>
<main class="contents">
	<header class="index-header">
		<h1 class="index-header-name">
			JavaScript API Reference
		</h1>
	</header>
	<div class="reflection-container">
		<div class="reflection-main">
			<section class="members-group members-group-comment ">
				<div class="members-group-body">
					<h2 id="overview">Overview</h2>
					<p>WebDNN JavaScript API is consisted of main module (<a href="modules/webdnn.html"><code>WebDNN</code></a>) and support modules
					<a href="modules/webdnn_math.html"><code>WebDNN.Math</code></a>, <a href="modules/webdnn_image.html"><code>WebDNN.Image</code></a>).</p>
					<p>You can use this API by follow two usage.</p>
					<ul>
						<li><p>Use with <code>import</code> syntax</p>
							<pre><code class="lang-js">  <span class="hljs-comment">// index.js</span>
  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> WebDNN <span class="hljs-keyword">from</span> <span class="hljs-string">"webdnn"</span>

  <span class="hljs-keyword">let</span> runner = WebDNN.load(<span class="hljs-string">'./model'</span>);
</code></pre>
						</li>
						<li><p>Use with <code>&lt;script&gt;</code> tag</p>
							<pre><code class="lang-html">  <span class="hljs-comment">&lt;!-- index.html --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./webdnn.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
      WebDNN.load(<span class="hljs-string">'./model'</span>);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
						</li>
					</ul>
					<p>Support libraries are also loaded when main module is loaded.</p>
					<h2 id="basic-example">Basic Example</h2>
					<p>First, load your model by <a href="modules/webdnn.html#load"><code>WebDNN.load</code></a>. This function load your model asynchronously.
					Therefore you have to use ES2016 async/await syntax or promise syntax.</p>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2016</span>
<span class="hljs-keyword">let</span> runner = <span class="hljs-keyword">await</span> WebDNN.load(<span class="hljs-string">'./model'</span>);
</code></pre>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2015</span>
WebDNN.load(<span class="hljs-string">'./model'</span>)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{ <span class="hljs-comment">/* do something */</span> });
</code></pre>
					<p>Then you can get <a href="classes/webdnn.descriptorrunner.html"><code>DescriptorRunner</code></a> instance, which executes your model.
					Runner also provides interface of input and output buffers. You can read and write data through this interface.</p>
					<p>For example, load image data by using <a href="modules/webdnn_image.html#getimagearray"><code>WebDNN.Image.getImageArray()</code></a> and set it into
					input buffer.</p>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2016</span>
<span class="hljs-keyword">let</span> imageArray = <span class="hljs-keyword">await</span> WebDNN.Image.getImageArray(); <span class="hljs-comment">// Load image RGB data as Float32Array</span>
runner.getInputViews()[<span class="hljs-number">0</span>].set(imageArray); <span class="hljs-comment">// Write data</span>
</code></pre>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2015</span>
WebDNN.Image.getImageArray()
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">imageArray</span>) </span>{ runner.getInputViews()[<span class="hljs-number">0</span>].set(imageArray) });
</code></pre>
					<p>Also you can access the output buffer.</p>
					<pre><code class="lang-ts"><span class="hljs-keyword">let</span> result = runner.getOutputViews()[<span class="hljs-number">0</span>];
</code></pre>
					<p>Finally, run inference!</p>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2016</span>
<span class="hljs-keyword">await</span> runner.run();
</code></pre>
					<pre><code class="lang-ts"><span class="hljs-comment">// ES2015</span>
runner.run()
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">/* do something */</span> });
</code></pre>
					<p>Because <a href="classes/webdnn.descriptorrunner.html#getoutputviews"><code>DescriptorRunner.getOutputViews()</code></a> returns
						<a href="classes/webdnn.symbolictypedarray.html"><code>SymbolicTypedArray</code></a>, which is not actual typed array,
					you need to convert it into actual typed array by using <a href="classes/webdnn.symbolictypedarray.html#toactual"><code>SymbolicTypedArray.toActual()</code></a>.</p>
					<pre><code class="lang-ts"><span class="hljs-built_in">console</span>.log(result.toActual());
</code></pre>
				</div>
			</section>
		</div>
	</div>
</main>
</body>
</html>